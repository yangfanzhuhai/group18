<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title> Progress! Login </title>
    
    <!-- Bootstrap core CSS -->
    <link href="@routes.Assets.at("stylesheets/bootstrap.min.css")" rel="stylesheet">
    
    <!-- Our own style -->
    <link href ="@routes.Assets.at("stylesheets/theme.css")" rel="stylesheet" type="text/css">
  </head>

  <body>
  	<div id = "title" align = "center" class ="title" >
        <img src="@routes.Assets.at("images/title.jpg")" alt="some_text" width="500">
    </div>
    <div class="container">
      <div id = "login_box" class = "login_box"> 
	    <div padding = "50px" margin="50">
		    <input name="username" type="text" maxlength="512"
			    placeholder="Username" id="username" align = "center" class="form-control"/>
		    <input name="password" type="password" maxlength="512"
			    placeholder="Password" id="password" align = "center" class="form-control"/>	    
	    </div>
	    <div class = "remember" id = "remember_me">
		    <input type="checkbox" placeholder="Remember me" name = "Remember me">
			    Remember Me
		    </input> <br>
		    <button type="submit" class = "btn btn-info" onclick = "register()" >
			    Register
		    </button>
		    <button type="submit" class="btn btn-success" name="login_button" id="login_button" onclick="login()" >
			    Login
		    </button>
	    </div>
    </div> <!-- /login box -->	
    <div id = "logo" align = "center" class = "title" >
        <img src="@routes.Assets.at("images/logo.jpg")" alt="some_text" width="500" >
    </div>
</div> <!-- /container -->	

<script>

function register() {
  window.location.href = '@routes.Application.register';
}

function login() {

	var remember_me = document.getElementById("remember_me");
	
	if (remember_me.checked) {
		
		alert("remembered");
	}
	
	var username = document.getElementById("username").value;
	var password = document.getElementById("password").value;
	
	var credentials = "{\"username\" : "
                  + "\"" + username + "\", "
                  + "\"password\" : "
                  + "\"" + password + "\""
                  + "}";
            
	$.ajax({
      type: "POST",
      url: "/rest/login",
      data: {"credentials":credentials},
      success: function(data){
          window.location.href = '@routes.Application.index'
      },
      error: function (xhr, ajaxOptions, thrownError) {
      	if (xhr.status == 400) {
      		alert("Invalid login. Please register or try again");
      	}
      } 
      
  });      

}
    
</script>
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <script src="@routes.Assets.at("javascripts/bootstrap.min.js")"></script>
</body>
</html>

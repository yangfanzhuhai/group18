<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title> Register </title>

    <!-- Bootstrap core CSS -->
    <link href="@routes.Assets.at("stylesheets/bootstrap.min.css")" rel="stylesheet">
    
    <!-- Our own style -->
    <link href ="@routes.Assets.at("stylesheets/theme.css")" rel="stylesheet" type="text/css">
  </head>

  <body>
    <div class="navbar navbar-inverse navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="#">Progress</a>
      </div>
      <!--div class="collapse navbar-collapse">
        <ul class="nav navbar-nav">
          <li class="active"><a href="#">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
      </div><!--/.nav-collapse -->
    </div>
    </div>
  
  <ul>
  <!--li><a href="@routes.Application.index">News Feed</a></li>
  <li><a href="@routes.Application.tasks">Task List</a></li>
  <li><a href="@routes.Application.gits">Git Commits</a></li>
  <li><a href="@routes.Application.builds">Build History</a></li>
  <li><a href="@routes.Application.about">About</a></li-->
  <li><a href="@routes.Application.login">Log in</a></li>
  </ul>

  <div id = "title" align = "center" class ="title" >
  <img src="@routes.Assets.at("images/title.jpg")" alt="some_text"
	  width="500">
  </div>
	
	
	
  <div id = "login_box" class = "login_box">

	  <form>
		  Username: <input type="text" id="username" onKeyDown="if (event.keyCode == 13) { register(); return false; };"><br>
		  Password: <input type="password" id="password" onKeyDown="if (event.keyCode == 13) { register(); return false; };"><br>
		  Re-enter Password: <input type="password" id="password_reenter" onKeyDown="if (event.keyCode == 13) { register(); return false; };"><br>
	  </form>

	  <button name="register_button" class = "remember" id="register_button" onclick="register()" >
		  Register
	  </button>
	
  </div>

  <div id = "logo" align = "center" class = "title" >
  <img src="@routes.Assets.at("images/logo.jpg")" alt="some_text"
	  width="500" >
  </div>

  <ul>
  <li><a href="contact.asp">Contact us</a></li>
  <li><a href="about.asp">About</a></li>
  </ul>

  <script>

  function register() {

	  //var first_name = document.getElementById("first_name").value;
	  //var last_name = document.getElementById("last_name").value;
	  var username = document.getElementById("username").value;
	  var password = document.getElementById("password").value;
	  var password_reenter = document.getElementById("password_reenter").value;
	
	  /*if (first_name == "") {

		  alert("Please enter your first name");
	
	  } else if (last_name == "") {

		  alert("Please enter your second name");

	  } else */if (username == "") {

		  alert("Please enter a username");

	  } else if (password == "") {
		
		  alert("Please enter a password");

	  } else if (password_reenter == "") {

		  alert("Please re-enter your password");

	  } else if (password != password_reenter) {

		  alert("Passwords do not match");

	  } else {
              var credentials = "{\"username\" : "
                  + "\"" + username + "\", "
                  + "\"password\" : "
                  + "\"" + password + "\""
                  + "}";
              
              
              $.ajax({
                  type: "POST",
                  url: "/rest/register",
                  data: {"credentials":credentials},
                  success: function(data){        
				      window.location.href = '@routes.Application.login'
                  },
                  error: function (xhr, ajaxOptions, thrownError) {
                  	if (xhr.status == 400) {
                  		alert("Username is already take. Please choose another.");
                  	}
                  } 
              });      
	  }

  }
  </script>
      <!-- Bootstrap core JavaScript
      ================================================== -->
      <!-- Placed at the end of the document so the pages load faster -->
      <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
      <script src="@routes.Assets.at("javascripts/bootstrap.min.js")"></script>
  </body>
</html>
